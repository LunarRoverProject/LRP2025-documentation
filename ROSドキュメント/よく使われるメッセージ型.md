# ROS2 でよく使われるメッセージ型

## 概要

ROS2 では様々なメッセージ型が提供されており、用途に応じて適切な型を選択することが重要です。このドキュメントでは、よく使われるメッセージ型をカテゴリ別に紹介します。

## 基本メッセージ型 (std_msgs)

### 数値型

| メッセージ型       | 説明                  | 使用例                       |
| ------------------ | --------------------- | ---------------------------- |
| `std_msgs/Bool`    | 真偽値                | スイッチの状態、フラグ       |
| `std_msgs/Int8`    | 8 ビット整数          | 小さな数値、状態コード       |
| `std_msgs/Int16`   | 16 ビット整数         | センサー値、カウンター       |
| `std_msgs/Int32`   | 32 ビット整数         | 一般的な整数値               |
| `std_msgs/Int64`   | 64 ビット整数         | 大きな整数値、タイムスタンプ |
| `std_msgs/UInt8`   | 8 ビット符号なし整数  | バイトデータ、色値           |
| `std_msgs/UInt16`  | 16 ビット符号なし整数 | センサー値                   |
| `std_msgs/UInt32`  | 32 ビット符号なし整数 | ID、アドレス                 |
| `std_msgs/UInt64`  | 64 ビット符号なし整数 | 大きな ID                    |
| `std_msgs/Float32` | 32 ビット浮動小数点数 | 一般的な実数値               |
| `std_msgs/Float64` | 64 ビット浮動小数点数 | 高精度な実数値               |

### 文字列・配列型

| メッセージ型                 | 説明             | 使用例                     |
| ---------------------------- | ---------------- | -------------------------- |
| `std_msgs/String`            | 文字列           | ログメッセージ、コマンド   |
| `std_msgs/Byte`              | バイト           | 生データ                   |
| `std_msgs/ByteMultiArray`    | バイト配列       | 画像データ、バイナリデータ |
| `std_msgs/Char`              | 文字             | 単一文字                   |
| `std_msgs/ColorRGBA`         | 色情報           | RGB 値、透明度             |
| `std_msgs/Int32MultiArray`   | 整数配列         | 整数値の配列               |
| `std_msgs/Float32MultiArray` | 浮動小数点数配列 | 浮動小数点数の配列         |

### 時間・ヘッダー型

| メッセージ型        | 説明               | 使用例                      |
| ------------------- | ------------------ | --------------------------- |
| `std_msgs/Header`   | メッセージヘッダー | タイムスタンプ、フレーム ID |
| `std_msgs/Duration` | 時間間隔           | 待機時間、実行時間          |
| `std_msgs/Time`     | 時刻               | タイムスタンプ              |

## ジオメトリメッセージ型 (geometry_msgs)

### 位置・姿勢

| メッセージ型                 | 説明                         | 使用例               |
| ---------------------------- | ---------------------------- | -------------------- |
| `geometry_msgs/Point`        | 3D 点                        | 座標点               |
| `geometry_msgs/Point32`      | 3D 点（32 ビット）           | 軽量な座標点         |
| `geometry_msgs/PointStamped` | タイムスタンプ付き点         | センサー検出点       |
| `geometry_msgs/Pose`         | 位置と姿勢                   | ロボットの位置・向き |
| `geometry_msgs/PoseStamped`  | タイムスタンプ付き位置・姿勢 | ナビゲーション目標   |
| `geometry_msgs/Pose2D`       | 2D 位置・姿勢                | 平面移動ロボット     |

### ベクトル・回転

| メッセージ型                     | 説明                       | 使用例         |
| -------------------------------- | -------------------------- | -------------- |
| `geometry_msgs/Vector3`          | 3D ベクトル                | 速度、加速度   |
| `geometry_msgs/Vector3Stamped`   | タイムスタンプ付きベクトル | センサー測定値 |
| `geometry_msgs/Quaternion`       | 四元数                     | 3D 回転        |
| `geometry_msgs/Transform`        | 座標変換                   | 座標系間の変換 |
| `geometry_msgs/TransformStamped` | タイムスタンプ付き変換     | TF 変換        |

### 軌道・パス

| メッセージ型                   | 説明                     | 使用例             |
| ------------------------------ | ------------------------ | ------------------ |
| `geometry_msgs/Twist`          | 速度・角速度             | ロボットの移動指令 |
| `geometry_msgs/TwistStamped`   | タイムスタンプ付き速度   | センサー測定速度   |
| `geometry_msgs/Polygon`        | 多角形                   | 障害物領域         |
| `geometry_msgs/PolygonStamped` | タイムスタンプ付き多角形 | 動的障害物         |

## センサーメッセージ型 (sensor_msgs)

### 画像・カメラ

| メッセージ型                  | 説明           | 使用例            |
| ----------------------------- | -------------- | ----------------- |
| `sensor_msgs/Image`           | 画像           | カメラ画像        |
| `sensor_msgs/CompressedImage` | 圧縮画像       | JPEG/PNG 画像     |
| `sensor_msgs/CameraInfo`      | カメラ情報     | カメラパラメータ  |
| `sensor_msgs/PointCloud2`     | 点群           | 3D スキャンデータ |
| `sensor_msgs/PointField`      | 点群フィールド | 点群の属性情報    |

### 距離・環境センサー

| メッセージ型                   | 説明             | 使用例                     |
| ------------------------------ | ---------------- | -------------------------- |
| `sensor_msgs/LaserScan`        | レーザースキャン | LiDAR データ               |
| `sensor_msgs/Range`            | 距離測定         | 超音波センサー             |
| `sensor_msgs/Imu`              | 慣性測定         | 加速度計・ジャイロスコープ |
| `sensor_msgs/MagneticField`    | 磁場             | コンパス                   |
| `sensor_msgs/Temperature`      | 温度             | 温度センサー               |
| `sensor_msgs/RelativeHumidity` | 湿度             | 湿度センサー               |
| `sensor_msgs/FluidPressure`    | 流体圧力         | 気圧計                     |

### ジョイスティック・入力

| メッセージ型                   | 説明                               | 使用例             |
| ------------------------------ | ---------------------------------- | ------------------ |
| `sensor_msgs/Joy`              | ジョイスティック                   | ゲームパッド入力   |
| `sensor_msgs/JoyFeedback`      | ジョイスティックフィードバック     | 振動フィードバック |
| `sensor_msgs/JoyFeedbackArray` | ジョイスティックフィードバック配列 | 複数フィードバック |

## ナビゲーションメッセージ型 (nav_msgs)

### 地図・経路

| メッセージ型             | 説明           | 使用例             |
| ------------------------ | -------------- | ------------------ |
| `nav_msgs/OccupancyGrid` | 占有格子地図   | SLAM 地図          |
| `nav_msgs/Path`          | 経路           | ナビゲーション経路 |
| `nav_msgs/GridCells`     | 格子セル       | 障害物セル         |
| `nav_msgs/MapMetaData`   | 地図メタデータ | 地図の情報         |

### オドメトリ・位置推定

| メッセージ型              | 説明         | 使用例             |
| ------------------------- | ------------ | ------------------ |
| `nav_msgs/Odometry`       | オドメトリ   | ロボットの位置推定 |
| `nav_msgs/GetMap`         | 地図取得要求 | 地図サーバー       |
| `nav_msgs/GetMapResponse` | 地図取得応答 | 地図データ         |

## アクション・サービスメッセージ型

### アクション

| メッセージ型                     | 説明               | 使用例             |
| -------------------------------- | ------------------ | ------------------ |
| `actionlib_msgs/GoalID`          | アクション目標 ID  | アクション識別子   |
| `actionlib_msgs/GoalStatus`      | アクション状態     | アクション進行状況 |
| `actionlib_msgs/GoalStatusArray` | アクション状態配列 | 複数アクション管理 |

### サービス

| メッセージ型       | 説明             | 使用例            |
| ------------------ | ---------------- | ----------------- |
| `std_srvs/Empty`   | 空のサービス     | 単純なトリガー    |
| `std_srvs/Trigger` | トリガーサービス | 開始/停止コマンド |
| `std_srvs/SetBool` | 真偽値設定       | フラグ設定        |

## 診断メッセージ型 (diagnostic_msgs)

| メッセージ型                       | 説明         | 使用例         |
| ---------------------------------- | ------------ | -------------- |
| `diagnostic_msgs/DiagnosticStatus` | 診断状態     | システム状態   |
| `diagnostic_msgs/DiagnosticArray`  | 診断配列     | 複数診断情報   |
| `diagnostic_msgs/KeyValue`         | キー・値ペア | 診断パラメータ |

## 使用例

### Python での使用例

```python
from std_msgs.msg import String, Int32, Float64
from geometry_msgs.msg import Twist, Pose
from sensor_msgs.msg import LaserScan, Image
from nav_msgs.msg import Odometry

# 基本的なメッセージ作成
string_msg = String()
string_msg.data = "Hello ROS2"

int_msg = Int32()
int_msg.data = 42

# ジオメトリメッセージ作成
twist_msg = Twist()
twist_msg.linear.x = 1.0
twist_msg.angular.z = 0.5
```

### C++での使用例

```cpp
#include "std_msgs/msg/string.hpp"
#include "geometry_msgs/msg/twist.hpp"
#include "sensor_msgs/msg/laser_scan.hpp"

// 基本的なメッセージ作成
auto string_msg = std_msgs::msg::String();
string_msg.data = "Hello ROS2";

auto twist_msg = geometry_msgs::msg::Twist();
twist_msg.linear.x = 1.0;
twist_msg.angular.z = 0.5;
```

## メッセージ型の選択指針

1. **用途に応じた選択**: データの性質に最も適した型を選択
2. **精度の考慮**: 必要以上の精度は避け、メモリ使用量を最適化
3. **タイムスタンプ**: 時間情報が必要な場合は`Stamped`版を使用
4. **配列データ**: 大量のデータは適切な配列型を使用
5. **カスタムメッセージ**: 標準型で表現できない場合はカスタムメッセージを作成

## 注意事項

- メッセージ型は一度定義すると変更が困難
- パフォーマンスを考慮して適切な型を選択
- ネットワーク転送量を考慮して圧縮型を使用
- バージョン互換性に注意
